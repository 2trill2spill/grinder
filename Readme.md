About
=====

Grinder is a system to automate the fuzzing of web browsers and the management of a large number of crashes. Grinder Nodes provide an automated way to fuzz a browser, and generate useful crash information (such as call stacks with symbol information as well as logging information which can be used to generate reproducible test cases at a later stage). A Grinder Server provides a central location to collate crashes and, through a web interface, allows multiple users to login and manage all the crashes being generated by all of the Grinder Nodes.

Grinder Screenshots
===================

![Grinder Server Screenshot 1](https://github.com/stephenfewer/grinder/raw/master/screenshot_server1.png "Grinder Server Screenshot 1")

![Grinder Node Screenshot](https://github.com/stephenfewer/grinder/raw/master/screenshot_node.png "Grinder Node Screenshot")

Fuzzers
=======

Grinder does not include any fuzzers for the Grinder Nodes and you will need to write your own. However a very simple example fuzzer is included (.\grinder\node\fuzzer\SimpleExample.html) to show how to begin writing suitable fuzzers for use with Grinder.

Installing a Grinder Server
===========================

Installing a Grinder server requires a web server with PHP and MySQL.

* Copy the contents of .\grinder\server\ over the the webserver.

* Create a MySQL database and associated user.

* Surf over to the install.php page to complete the installation.

* When installing, the 'Grinder Key' used must be the same as the one written in all the Grinder Nodes config.rb files (see below). 

* After successful installation, you can login and view all of the running nodes and all of the crashes generated.

Installing a Grinder Node
=========================

Note: Grinder nodes are intended to be installed on Windows systems, but as they are written primarily in Ruby it should be possible to get Linux/Mac support with some modifications.

* Install the latest stable version of Ruby (www.ruby-lang.org).

* Copy '.\grinder\node\data\grinder_logger.dll' to 'c:\windows\system32\' (Or 'c:\windows\syswow64\' on an x64 system)

* Copy '.\grinder\node\data\dbghelp.dll' to 'c:\windows\system32\' (Or 'c:\windows\syswow64\' on an x64 system)

* Copy '.\grinder\node\data\symsrv.dll' to 'c:\windows\system32\' (Or 'c:\windows\syswow64\' on an x64 system)

* Create a folder for symbol files to be stored, e.g. 'c:\symbols\'

* Edit the config.rb file to suit your setup. Please see the default config.rb file for a description of the various options. You may create multiple config files if you intend on running more than one node on a system, (e.g. config_g1.rb, config_g2.rb). You can then specify on the command line which config file to use when bringing up the node. If you have setup a Grinder server, use the same Grinder Key and the appropriate server URL so the node can communicate with the Grinder server.

* Finally to run the node issue a Ruby command as shown below where the browser parameter is the browser you want to fuzz (e.g. IE or CM).

> .\grinder\node\>ruby grinder.rb <browser> [--config=c:\path\to\alternative\config.rb]

Setting Up Encryption For Crash Information
===========================================

When a Grinder Node generates a crash in a browser, two files are created within the .\grinder\node\crashes\ directory. The contents of these files are also transmitted to the remote Grinder Server. The .crash file contains useful debugging information (call stack, disassembly, register info, and so on), while the .log file contains the logging information generated by the fuzzer which can be used to generate a reproducible testcase so you can trigger the crash again. As this information is sensitive in nature it is useful (and recommended) to encrypt it.

A Grinder Node can be configured to use an RSA public key to encrypt this information for storage both locally on the respective Node as well as for transmission and storage on the Grinder Server. Simply generate a suitable public key (details below) and edit the config.rb to use this key. Now when you download the crash/log files from the Grinder Server you will need to decrypt them before you can use them.

To generate a suitable key pair you can use the included crypto.rb utility:

> .\grinder\node\>ruby crypto.rb /generate /pubkey public.pem /privkey private.pem [/keysize 4096] [/keypass MyKeYpAsSwOrD]

The generated public key will need to be copied over to all the Grinder Nodes while the private key will need to be stored securely on the analyst's workstations.

To decrypt an encrypted crash/log file you can then use the following command:

> .\grinder\node\>ruby crypto.rb /decrypt /privkey private.pem /inputfile XXXXXXXX.XXXXXXXX.crash [/outputfile plaintext.txt] [/keypass MyKeYpAsSwOrD]

Generating a Testcase From a Log File
=====================================

When you have generated a crash and downloaded the log/crash files (and decrypted them if required) you can use the testcase.rb utility to transform the .log file into a html file that will (hopefully) reproduce the crash.

> .\grinder\node\>ruby testcase.rb c:\path\to\XXXXXXXX.XXXXXXXX.log > c:\path\to\XXXXXXXX.XXXXXXXX.html

Depending on how you write your fuzzers you will probably need to modify testcase.rb to suit.

If the testcase does not reproduce the crash it is usefull to create an 'Alert' within the Grinder Server to alert you by email whenever the same crash is encountered again. Using a different log file for the same crash may help reproduce it.

Source Code
===========

The latest source code for Grinder can be found at https://github.com/stephenfewer/grinder

Bug Reports and Code Contributions
==================================

Please file all bug reports via GitHub at the following address: https://github.com/stephenfewer/grinder/issues

Please submit all code contributions as pull requests via GitHub, thanks!.

License
=======

Grinder is licensed under a 3 clause BSD license. Please see the full text of this license in the .\grinder\LICENSE.txt file.

The following libraries are included with Grinder and are licensed separately as follows:

* Metasm is licensed under a GNU Lesser General Public License (Please see .\grinder\node\lib\metasm\LICENCE)
* JQuery is licensed under the MIT license (Please see http://jquery.org/license)
* JQuery UI is licensed under the MIT license (Please see http://jquery.org/license)
* jQuery Cookie plugin is licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
* dbghelp.dll (v6.12.2.633) and symsrv.dll (v6.12.2.633) are redistributable libraries from the Microsoft Debuggiong Tools for Windows. (Please see .\grinder\node\data\debugging_tools_license.txt)
